<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clothes Recommender</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }

  #search-container {
    text-align: center;
    margin-top: 50px;
  }

  #keyword-input {
    width: 300px;
    height: 25px;
    font-size: 16px;
  }

  #search-button {
    height: 31px;
    background-color: #4CAF50;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 16px;
  }

  #results-container {
    margin-top: 20px;
    text-align: center;
  }
</style>
</head>
<body>
<div id="search-container">
    <input type="text" id="keyword-input" placeholder="Enter keywords (e.g., 'summer casual')">
    <button id="search-button">옷 추천(Recommend Clothes)</button>
</div>
<div id="results-container"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#search-button').on('click', function() {
            var keyword = $('#keyword-input').val();
            if (keyword.trim() !== "") {
                askOpenAI(keyword);
            } else {
                alert("Please input Keywords.");
            }
        });
    });

    function askOpenAI(keyword) {
        var api_url = 'https://api.openai.com/v1/chat/completions';

        var messages = [
            {
                "role": "user",
                "content": "You are an expert AI who recommends personalized clothing styles. You provide fashion expertise. Your analysis is just a reference, so it doesn't matter if it's incomplete. When the customer enters the desired style of keyword, it provides a reference to the appropriate clothing. Please show me the style of the clothes and the pictures. Provide a response in the following format. 1. Detailed recommendations for top and bottom, accessories (up to 3)<br> 2. Provide photos of clothes (reference)<br> 3. 1 follow-up question if more information is needed."
            },
            {
                "role": "user",
                "content": "Keyword for fashion style: " + keyword
            }
        ];

        $.ajax({
            url: api_url,
            type: "POST",
            headers: {
                "Authorization": "Bearer YOUR_SECRET_KEY", // Replace YOUR_SECRET_KEY with the actual key
                "Content-Type": "application/json"
            },
            data: JSON.stringify({
                "model": "gpt-3.5-turbo",
                "messages": messages
            }),
            success: function(response) {
                var aiResponse = response.choices[0].message.content.trim();
                $('#results-container').html(aiResponse);
            },
            error: function(err) {
                $('#results-container').text("Sorry, there was an error processing your request. Please try again later.");
            }
        });
    }
</script>

</body>
</html>
