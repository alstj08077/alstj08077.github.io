<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Clothes Recommender</title>
<style>
  body {
    font-family: Arial, sans-serif;
  }

  #search-container {
    text-align: center;
    margin-top: 50px;
  }

  #keyword-input {
    width: 300px;
    height: 25px;
    font-size: 16px;
  }

  #search-button {
    height: 31px;
    background-color: #4CAF50;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 16px;
  }

  #results-container {
    margin-top: 20px;
    text-align: center;
  }
</style>
</head>
<body>
<div id="search-container">
    <input type="text" id="keyword-input" placeholder="Enter keywords (e.g., 'summer casual')">
    <button id="search-button">옷 추천(Recommend Clothes)</button>
</div>
<div id="results-container"></div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        $('#search-button').on('click', function() {
            var clothesSelection = $('#keyword-input').val();
            if (clothesSelection.trim() !== "") {
                askOpenAI(clothesSelection);
            } else {
                alert("Please input Keywords.");
            }
        });
    });

    function askOpenAI(complaints) {
        var api_url = 'https://api.openai.com/v1/chat/completions';

        var messages = [
            {
                "role": "user",
                "content": "You are a skincare expert AI to assist dermatologists. You provide the dermatologist with the best knowledge and analyses based on the patient's statement the dermatologist has shared. It doesn't matter if your analysis is incomplete because it is just a reference. The dermatologist will properly diagnose referring to your analysis as a reference. Generate response in the same language of PATIENT COMPLAINT. Provide responses in the following format: 1. Possible Causes(Max three, bullet points)<br> 2. Immediate actions or treatments(if needed) <br> 3. Long-term strategy for skin care <br> 4. One follow-up question if more information is needed."
            },
            {
                "role": "user",
                "content": "PATIENT COMPLAINTS: " + complaints
            }
        ];

        $.ajax({
            url: api_url,
            type: "POST",
            headers: {
                "Authorization": "Bearer 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", // Replace YOUR_SECRET_KEY with the actual key
                "Content-Type": "application/json"
            },
            data: JSON.stringify({
                "model": "gpt-3.5-turbo",
                "messages": messages
            }),
            success: function(response) {
                var aiResponse = response.choices[0].message.content.trim();
                $('#aiResponse').html(aiResponse);
            },
            error: function(err) {
                $('#aiResponse').text("Sorry, there was an error processing the complaint. Please try again later.");
            }
        });
    }
</script>

</body>
</html>
